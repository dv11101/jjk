<!DOCTYPE html>
<html>
<head>
    <title>Hand Sign Domain</title>

    <style>
        body {
            margin: 0;
            background: black;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* LEFT SIDE - MAIN DOMAIN */
        .main {
            flex: 3;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            text-align: center;
            transition: 1s;
        }

        .title {
            font-size: 2.5rem;
            transition: 0.5s;
        }

        /* RIGHT SIDE - CAMERA */
        .camera-container {
            flex: 1;
            background: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            border-left: 2px solid crimson;
        }

        video {
            width: 90%;
            border: 2px solid crimson;
            border-radius: 10px;
        }

        @keyframes pulse {
            0% { text-shadow: 0 0 10px crimson; }
            50% { text-shadow: 0 0 40px crimson; }
            100% { text-shadow: 0 0 10px crimson; }
        }

        .active {
            background: darkred;
        }

        .active .title {
            color: crimson;
            animation: pulse 1s infinite;
        }

    </style>
</head>

<body>

    <div class="main" id="mainArea">
        <div class="title" id="status">Show Your Domain Sign</div>
    </div>

    <div class="camera-container">
        <video id="video" autoplay playsinline></video>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

    <script>

        const video = document.getElementById("video");
        const mainArea = document.getElementById("mainArea");
        const statusText = document.getElementById("status");

        const hands = new Hands({
            locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
        });

        hands.setOptions({
            maxNumHands: 1,
            modelComplexity: 1,
            minDetectionConfidence: 0.7,
            minTrackingConfidence: 0.7
        });

        hands.onResults(results => {

            if (results.multiHandLandmarks.length > 0) {
                const landmarks = results.multiHandLandmarks[0];
                detectGesture(landmarks);
            } else {
                resetState();
            }
        });

        const camera = new Camera(video, {
            onFrame: async () => {
                await hands.send({ image: video });
            },
            width: 640,
            height: 480
        });

        camera.start();

        function detectGesture(landmarks) {

            const indexTip = landmarks[8];
            const indexBase = landmarks[6];

            if (indexTip.y < indexBase.y) {
                activateDomain();
            } else {
                resetState();
            }
        }

        function activateDomain() {
            statusText.innerText = "DOMAIN EXPANSION";
            mainArea.classList.add("active");
        }

        function resetState() {
            statusText.innerText = "Show Your Domain Sign";
            mainArea.classList.remove("active");
        }

    </script>

</body>
</html>
