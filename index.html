<!DOCTYPE html>
<html>
<head>
  <title>Cursed Technique System</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
      color: white;
      font-family: monospace;
    }

    #video {
      position: absolute;
      right: 20px;
      bottom: 20px;
      width: 300px;
      border-radius: 10px;
      transform: scaleX(-1);
    }

    #technique {
      position: absolute;
      top: 40%;
      width: 100%;
      text-align: center;
      font-size: 60px;
      letter-spacing: 8px;
      opacity: 0;
      transition: 0.3s;
    }

    .active {
      opacity: 1;
    }

    .red {
      color: #ff3c3c;
      text-shadow: 0 0 20px red;
    }

    .purple {
      color: #a855f7;
      text-shadow: 0 0 25px purple;
    }

    .blue {
      color: #3b82f6;
      text-shadow: 0 0 25px cyan;
    }
  </style>
</head>
<body>

<video id="video" autoplay playsinline></video>
<div id="technique"></div>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<script>
const video = document.getElementById("video");
const techniqueText = document.getElementById("technique");

function showTechnique(name, colorClass) {
  techniqueText.className = "";
  techniqueText.classList.add("active");
  techniqueText.classList.add(colorClass);
  techniqueText.innerText = name;

  setTimeout(() => {
    techniqueText.className = "";
  }, 2000);
}

const hands = new Hands({
  locateFile: (file) => {
    return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
  }
});

hands.setOptions({
  maxNumHands: 1,
  modelComplexity: 1,
  minDetectionConfidence: 0.7,
  minTrackingConfidence: 0.7
});

hands.onResults(results => {
  if (results.multiHandLandmarks.length > 0) {
    const landmarks = results.multiHandLandmarks[0];
    detectGesture(landmarks);
  }
});

const camera = new Camera(video, {
  onFrame: async () => {
    await hands.send({ image: video });
  },
  width: 640,
  height: 480
});
camera.start();

function detectGesture(lm) {
  const thumbTip = lm[4];
  const indexTip = lm[8];
  const middleTip = lm[12];
  const ringTip = lm[16];
  const pinkyTip = lm[20];

  const wrist = lm[0];

  // Finger up detection
  const indexUp = indexTip.y < lm[6].y;
  const middleUp = middleTip.y < lm[10].y;
  const ringUp = ringTip.y < lm[14].y;
  const pinkyUp = pinkyTip.y < lm[18].y;
  const thumbUp = thumbTip.x < lm[3].x;

  // ðŸ”¥ GESTURE MAPPINGS

  // Gojo (Index + Middle up only)
  if (indexUp && middleUp && !ringUp && !pinkyUp) {
    showTechnique("UNLIMITED VOID", "purple");
  }

  // Sukuna (All fingers up)
  else if (indexUp && middleUp && ringUp && pinkyUp) {
    showTechnique("DISMANTLE", "red");
  }

  // Hollow Purple (Index only)
  else if (indexUp && !middleUp && !ringUp && !pinkyUp) {
    showTechnique("HOLLOW PURPLE", "blue");
  }
}
</script>

</body>
</html>
